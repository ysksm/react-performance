# 要求仕様書 - Reactパフォーマンステストアプリケーション

## 1. プロジェクト概要

### 1.1 目的
- Reactのレンダリングパフォーマンスを測定・評価するためのアプリケーションを構築
- 大量のUI要素（400個のセル）による描画性能の検証
- リアルタイムデータ更新におけるReactの挙動分析

### 1.2 システム概要
- フロントエンド：React + TypeScript
- バックエンド：Express.js + TypeScript  
- アーキテクチャ：ドメイン駆動設計 + レイヤードアーキテクチャ
- 通信方式：REST API + ポーリング

## 2. 機能要求

### 2.1 グリッドシステム
**基本仕様**
- 20行 × 20列のマス目（合計400セル）
- 各セルは複数の状態を持つ（空白、選択、無効、アクティブなど）
- リアルタイムでの状態変更表示

**データ構造要求**
- Line1、Line2、...、Line20の個別変数として定義
- LineRootオブジェクトの下に各ラインを配置
- 階層的なデータ構造の維持

### 2.2 操作機能

#### 2.2.1 個別セル操作
- セルクリックによる状態変更
- 複数状態間の循環切り替え
- 即座にサーバーへ状態変更を送信

#### 2.2.2 行一括操作
- 行ヘッダーボタンによる行全体の状態変更
- 指定した状態への一括変更
- 20行すべてに操作ボタンを配置

#### 2.2.3 列一括操作  
- 列ヘッダーボタンによる列全体の状態変更
- 指定した状態への一括変更
- 20列すべてに操作ボタンを配置

#### 2.2.4 全面一括操作
- 全400セルの状態を一度に変更
- 複数の一括操作パターンを提供
- 操作確認ダイアログの表示

### 2.3 通信要求

#### 2.3.1 クライアント→サーバー通信
- 状態変更時のリアルタイム送信
- 個別セル、行、列、全体操作の区別
- エラーハンドリングとリトライ機構

#### 2.3.2 サーバー→クライアント通信
- 1秒間隔でのポーリング取得
- 差分更新による効率的なデータ転送
- 接続エラー時の自動復旧

### 2.4 状態管理要求
- Context APIやReduxの使用禁止
- Propsドリリングによる状態伝達
- コンポーネント間の疎結合性の維持

## 3. 非機能要求

### 3.1 パフォーマンス要求
- 400セルの同時レンダリング：60FPS維持
- 状態変更時のレスポンス：100ms以内
- ポーリング処理のCPU使用率：10%以下
- メモリ使用量：100MB以下

### 3.2 可用性要求
- サーバー接続エラー時の自動再接続
- 部分的な状態不整合の許容
- ネットワーク遅延への耐性

### 3.3 保守性要求
- ドメイン駆動設計による明確な責任分離
- 依存性逆転原則の適用
- 単体テスト可能な設計

## 4. 制約条件

### 4.1 技術制約
- React 19.x系の使用
- TypeScriptによる型安全性の確保
- Express.js 4.x系の使用
- 外部ライブラリの最小限使用

### 4.2 設計制約
- DDD（ドメイン駆動設計）の採用
- レイヤードアーキテクチャの実装
- 依存性逆転原則の遵守
- Repository パターンの使用

### 4.3 運用制約
- 開発環境での動作確認
- ローカル環境でのテスト実行
- ブラウザ：Chrome/Firefox/Safari対応

## 5. 受け入れ基準

### 5.1 機能面
- [ ] 20×20グリッドの正常表示
- [ ] 全操作パターンの動作確認
- [ ] 1秒ポーリングの正常動作
- [ ] 状態の永続化確認

### 5.2 性能面  
- [ ] 400セル一括変更時の描画性能
- [ ] 連続操作時のメモリリーク検出
- [ ] ポーリング負荷の測定

### 5.3 品質面
- [ ] TypeScriptエラーなし
- [ ] ESLint警告なし  
- [ ] コンポーネントの適切な分割
- [ ] プロップス型定義の完備
